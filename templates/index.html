{% extends "base.html" %} {% block title %}RPPYG Maker{% endblock %} {% block
navbar %}
<nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
        <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
        >
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown">
                    <a
                        class="nav-link dropdown-toggle"
                        href="#"
                        role="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                        >File</a
                    >
                    <ul class="dropdown-menu">
                        <li>
                            <a
                                class="dropdown-item"
                                href="{{ url_for('new_project') }}"
                                >New Project</a
                            >
                        </li>
                        <li>
                            <a
                                class="dropdown-item"
                                href="{{ url_for('open_project') }}"
                                >Open Project</a
                            >
                        </li>
                        <li>
                            <a
                                class="dropdown-item"
                                href="{{ url_for('open_folder') }}"
                                >Open Folder</a
                            >
                        </li>
                        <li><hr class="dropdown-divider" /></li>
                        <li>
                            <a
                                class="dropdown-item"
                                href="{{ url_for('close_project') }}"
                                >Close Project</a
                            >
                        </li>
                    </ul>
                </li>
                <li class="nav-item"><a class="nav-link" href="#">Save</a></li>
                <li class="nav-item dropdown">
                    <a
                        class="nav-link dropdown-toggle"
                        href="#"
                        role="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                        >Export</a
                    >
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Desktop</a></li>
                        <li>
                            <a
                                class="dropdown-item"
                                href="{{ url_for('export_to_android') }}"
                                >Android</a
                            >
                        </li>
                        <li>
                            <a
                                class="dropdown-item"
                                href="{{ url_for('export_to_browser') }}"
                                >Browser</a
                            >
                        </li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('start_game') }}"
                        >Play Test</a
                    >
                </li>
            </ul>
        </div>
    </div>
</nav>
{% endblock %} {% block content %}
<h1>RPPYG Maker</h1>

{% if context.table %}
<!-- Layer Selection -->
<div id="layer-controls">
    {% for layer_index, _ in context.table %}
    <label>
        <input
            type="checkbox"
            class="layer-toggle"
            data-layer="{{ layer_index }}"
            checked
        />
        Layer {{ layer_index + 1 }}
    </label>
    {% endfor %}
</div>

<!-- Map Rendering -->
<div id="map-container">
    {% for layer_index, layer in context.table %}
    <table
        class="map-layer"
        data-layer="{{ layer_index }}"
        border="None"
        cellspacing="0"
        cellpadding="0"
        style="position: absolute; display: block"
    >
        {% for row in layer %}
        <tr>
            {% for cell in row %}
            <td style="width: 64px; height: 64px; text-align: center">
                {% if cell %}
                <img
                    src="data:image/png;base64,{{ cell }}"
                    style="width: 100%; height: 100%"
                />
                {% endif %}
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
    {% endfor %}
</div>
{% endif %}

<script src="{{url_for('static', filename='toggle_layer.js')}}"></script>
{% endblock %}
